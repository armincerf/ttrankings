total=$(find html_files -name "*.html" | wc -l); find html_files -name "*.html" | while read -r file; do if [ ! -f "parsed_html_output/$(basename "$file" .html).csv" ]; then { cargo run --quiet --bin mkttl_match_card_scraper -- process-file --file "$file" > /dev/null 2>&1 && processed=$((processed+1)) && echo "Processed: $processed/$total ($(($total-$processed)) remaining)"; } & if [ $(jobs -r | wc -l) -ge 4 ]; then wait -n; fi; fi; done; wait
